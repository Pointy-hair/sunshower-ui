version: '3'

services:

  proxy:
    container_name: "proxy"
    image: "nginx:1.11.1"
    ports:
      - "32770:80"
      - "32771:443"
    links:
      - hasli-ui
      - hasli-web
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro

  hasli-web:
    container_name: "hasli-web"
    image: "hasli-web/web-dev:latest"
    volumes:
      - ../../hasli-web/:/usr/src/hasli-web
      - ~/.gradle/wrapper:/root/.gradle/wrapper
    links:
      - hasli-ui

  hasli-ui:
    container_name: "hasli-ui"
    image: "hasli-ui/ui-dev:latest"
    volumes:
      - ../:/usr/src/
      - ~/.jspm:/root/.jspm
      - ~/.gradle/wrapper:/root/.gradle/wrapper
