template
    .overlay(style="overflow-y:auto")
        .ui.container
            .overlay-close
                i.big.grey.icon.ion-close-round(click.delegate="close()")
            h2.ui.center.aligned.grey.header Create Instance
            .ui.basic.segment
                h2.ui.header
                    i.circular.blue.ion-ios-cloud-outline.icon.circular--icon.circular--icon_blue
                    .content
                        |  New Instance
            .ui.divider(style="margin-bottom:16px")
            .ui.two.column.centered.grid.ui.form.overlay-form
                .row
                    h4.ui.dividing.header.column Details
                .row
                    .column
                        form
                            .ui.field.overlay-field
                                .overlay-label
                                    label Name
                                .overlay-input.ui.input
                                    input(type="text" value.bind="template.name & validate")
                            .ui.field.overlay-field
                                .overlay-label
                                    label Description
                                .overlay-input.ui.input
                                    textarea(
                                        name="description"
                                        rows="3"
                                        value.bind="template.description"
                                    )

                .row
                    h4.ui.dividing.header.column Credentials
                .row
                    .column
                        .ui.field.overlay-field
                            .overlay-label
                                label Credential
                            .overlay-input.ui.input
                                .ui.fluid.search.selection.dropdown(ref="credentialList")
                                    input(
                                    type="hidden"
                                    name="credentialList"
                                    value.bind="template.credentialId & validate"
                                    )
                                    i.dropdown.icon
                                    .default.text Select Credential
                                    .menu
                                        .item(repeat.for="credential of credentials" data-value="${credential.id}")
                                            | ${credential.name}

                .row
                    h4.ui.dividing.header.column Providers
                .row
                    .column
                        .ui.field.overlay-field
                            .overlay-label
                                label Providers
                            .overlay-input.ui.input
                                .ui.fluid.search.selection.dropdown(ref="providerList")
                                    input(
                                        type="hidden"
                                        value.bind="template.providerId & validate"
                                        )
                                    i.dropdown.icon
                                    .default.text Select Provider
                                    .menu
                                        .item(repeat.for="provider of cloudProviders" data-value="${provider.id}")
                                            | ${provider.name}

                .row
                    h4.ui.dividing.header.column Configuration
                .row
                    .column
                        .ui.field.overlay-field
                            .overlay-label
                                label Operating System
                            .overlay-input.ui.input
                                .ui.fluid.search.selection.dropdown(ref="list")
                                    input(type="hidden" name="operatingSystem" value.bind="template.operatingSystem & validate")
                                    i.dropdown.icon
                                    .default.text Select OS
                                    .menu
                                        .item(repeat.for="os of osService.list()" data-value="${os.id}")
                                            image.ui.image(src='${os.icon}')
                                            | ${os.name}

                        .ui.field.overlay-field
                            .overlay-label
                                label Instance Count
                            .overlay-input.ui.input
                                input(
                                    type="number"
                                    name="instanceCount"
                                    min="0"
                                    step="1"
                                    value.bind="configuration.instanceCount"
                                )
                        .ui.field.overlay-field
                            .overlay-label
                                label CPU
                            .overlay-input.ui.input
                                input(
                                    type="number"
                                    name="cpu"
                                    min="0"
                                    step="1",
                                    value.bind="configuration.computeProfile.cores"
                                )
                        .ui.field.overlay-field
                            .overlay-label
                                label Disk
                            .overlay-input.ui.input
                                input(
                                    type="text"
                                    name="disk"
                                    value.bind="configuration.storageProfile.capacity"
                                )
                        .ui.field.overlay-field
                            .overlay-label
                                label Memory
                            .overlay-input.ui.input
                                input(
                                    type="text"
                                    name="memory"
                                    value.bind="configuration.memoryProfile.capacity"
                                )




                .row
                    h4.ui.dividing.header.column Instances
                .row
                    .column
                        .ui.segment(class="${searching ? 'loading' : ''}")
                            .ui.fluid.search.selection.dropdown(ref="providers")
                                i.dropdown.icon
                                .default.text Select OS
                                .menu
                                    .item
                                        image.ui.image(src="assets/sui/themes/hasli/assets/images/icons/provider/generic/vlan.svg")
                                            | Amazon EC2

                                    .item
                                        image.ui.image(src="assets/sui/themes/hasli/assets/images/icons/provider/generic/cloud.svg")
                                            | Inventory
                            .ui.horizontal.divider
                            .overlay-action-menu
                                .overlay-icons
                                    button.ui.button.secondary(
                                        click.delegate="search()"
                                        class="${searching} ? 'disabled' : ''"
                                        ) Search
                            .ui.horizontal.divider
                            .ui.fluid.search.selection.dropdown(ref="instanceType")
                                input(type="hidden")
                                i.dropdown.icon
                                .default.text Select Instance
                                .menu
                                    .item(repeat.for="descriptor of instanceTypes", data-value="${descriptor.key}")
                                        | ${descriptor.name} (${descriptor.description})

                .row
                    .column
                        button.ui.pull-right.button.primary(click.delegate="deployInstance()") Deploy Instance

