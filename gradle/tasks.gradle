def extractProperties = {
    if (!projects) {
        logger.log(Level.WARNING, 'Cannot update maven properties if no projects are set')
        return;
    }

    def projectList = projects.split("\\s*,\\s*")
    return projectList.collect { t ->
        def values = t.split(":")
        def pattern = "<${values[0]}>.*</${values[0]}>".toString()
        def subs = "<${values[0]}>${values[1]}</${values[0]}>".toString()
        return [pattern, subs]
    }

}

task updateMavenVersions() {

    doLast {

        def props = extractProperties()

        def file = new File("${project.rootDir}/bom/imported/pom.xml")
        def ft = file.text
        props.each {  i  ->
            ft = ft.replaceAll(i[0], i[1]);
        }

        file.write(ft)
    }

}
